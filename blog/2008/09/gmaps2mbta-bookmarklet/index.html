<!DOCTYPE html>
<html lang="en">
  <head>
  
   <meta charset="utf-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <meta name="description" content="">
   <meta name="author" content="">
   <link rel="shortcut icon" href="/favicon.ico">

   <title>Adam Jarret - Blog - GMaps2MBTA Bookmarklet</title>

    <link href="/css/main.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
   
  </head>

  <body class="atj">
  
    <div class="container">
    
      <div class="header">
         <ul class="nav nav-pills pull-right">
            <li class=""><a href="/">Home</a></li>
            <li class="active"><a href="/blog">Blog</a></li>
            <li><a href="https://github.com/adamjarret?tab=repositories">Projects</a></li>
         </ul>
         <h1><a href="/" class="text-muted">Adam Jarret</a></h1>
      </div>

      <div id="blog" class="row">
	<div class="col-md-8">
		<h2><a href="/blog">Blog</a></h2>
		<div class="post-header">
    <h3 class="post-title"><a href="/blog/2008/09/gmaps2mbta-bookmarklet">GMaps2MBTA Bookmarklet</a></h3>
    <span class="post-date">25 Sep 2008</span> | Tags: <span class="tags">
        
            <a href="/blog/tag/bookmarklet">bookmarklet</a>, 
        
            <a href="/blog/tag/google-maps">google-maps</a>, 
        
            <a href="/blog/tag/javascript">javascript</a>, 
        
            <a href="/blog/tag/mbta">mbta</a>, 
        
            <a href="/blog/tag/projects">projects</a>, 
        
            <a href="/blog/tag/web-dev">web-dev</a>
        
    </span>
</div>

<div id="post-/blog/2008/09/gmaps2mbta-bookmarklet" class="post">
    <p>I moved to Brighton, MA at the beginning of September and as a result I no longer have much use for a car. I live right on the B line which - as a supplement to my old size 11s - gets me everywhere I need to be.</p>

<p>Since I&#39;m new to the area, I have been using <a href="http://maps.google.com">Google Maps</a> a lot. While it&#39;s helpful to gain a general idea of where things are, it was becoming a frequent annoyance to cut and paste the start and end addresses from the Google Maps directions page into the <a href="http://mbta.com/rider_tools/trip_planner/">MBTA Trip Planner</a>.</p>

<p>To solve the problem I took my first stab at writing a Javascript bookmarklet.</p>

<p>The MBTA trip planner form submits &quot;post&quot; data, so my first approach was to create new a new form object in Javascript and submit it. This version worked fine in Safari and Chrome but did not work in Firefox for some reason.</p>

<p>Luckily, before I got too deep into debugging the script, I noticed that the MBTA trip planner would also accept &quot;get&quot; form data which allowed me to create a 3 line version of the bookmarklet that neglected creating objects entirely.</p>

<p>Both versions of the script are posted below. On a related note, I can wholeheartedly recommend the <a href="http://subsimple.com/bookmarklets/jsbuilder.htm">Bookmarklet Builder</a> from subsimple.com to compress the script for use as a bookmarklet.</p>

<h4><a title="GMaps2MBTA for Safari and Chrome" href="javascript:(function(){var start=document.getElementById('d_d').value;var end=document.getElementById('d_daddr').value;var mbta_form=document.createElement(&quot;form&quot;);mbta_form.action=&quot;http://mbta.com/rider_tools/trip_planner/&quot;;mbta_form.method=&quot;post&quot;;var sa=document.createElement(&quot;input&quot;);sa.name=&quot;sa&quot;;sa.value=start;mbta_form.appendChild(sa);var ea=document.createElement(&quot;input&quot;);ea.name=&quot;ea&quot;;ea.value=end;mbta_form.appendChild(ea);mbta_form.submit();})()">GMaps2MBTA</a></h4>

<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><code class="language-js" data-lang="js"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</code></pre></div></td><td class="code"><div class="highlight"><pre><span class="nx">javascript</span><span class="o">:</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
<span class="kd">var</span> <span class="nx">start</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;d_d&#39;</span><span class="p">).</span><span class="nx">value</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">end</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;d_daddr&#39;</span><span class="p">).</span><span class="nx">value</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">mbta_form</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;form&quot;</span><span class="p">);</span>
<span class="nx">mbta_form</span><span class="p">.</span><span class="nx">action</span> <span class="o">=</span> <span class="s2">&quot;http://mbta.com/rider_tools/trip_planner/&quot;</span><span class="p">;</span>
<span class="nx">mbta_form</span><span class="p">.</span><span class="nx">method</span> <span class="o">=</span> <span class="s2">&quot;post&quot;</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">sa</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;input&quot;</span><span class="p">);</span>
<span class="nx">sa</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s2">&quot;sa&quot;</span><span class="p">;</span>
<span class="nx">sa</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">start</span><span class="p">;</span>
<span class="nx">mbta_form</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">sa</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">ea</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;input&quot;</span><span class="p">);</span>
<span class="nx">ea</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s2">&quot;ea&quot;</span><span class="p">;</span>
<span class="nx">ea</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">end</span><span class="p">;</span>
<span class="nx">mbta_form</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">ea</span><span class="p">);</span>

<span class="nx">mbta_form</span><span class="p">.</span><span class="nx">submit</span><span class="p">();</span>
<span class="p">})()</span>
</pre></div>
</td></tr></table>

<h4><a title="GMaps2MBTA for Firefox and IE" href="javascript:(function(){var%20start=document.getElementById('d_d').value;var%20end=document.getElementById('d_daddr').value;document.location.href='http://mbta.com/rider_tools/trip_planner/?sa='+escape(start)+'&amp;ea='+escape(end);})()">GMaps2MBTA-FF</a></h4>

<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><code class="language-js" data-lang="js">1
2
3
4
5
6</code></pre></div></td><td class="code"><div class="highlight"><pre><span class="nx">javascript</span><span class="o">:</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
<span class="kd">var</span> <span class="nx">start</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;d_d&#39;</span><span class="p">).</span><span class="nx">value</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">end</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;d_daddr&#39;</span><span class="p">).</span><span class="nx">value</span><span class="p">;</span>

<span class="nb">document</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="o">=</span><span class="s1">&#39;http://mbta.com/rider_tools/trip_planner/?sa=&#39;</span><span class="o">+</span><span class="nx">escape</span><span class="p">(</span><span class="nx">start</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&amp;amp;ea=&#39;</span><span class="o">+</span><span class="nx">escape</span><span class="p">(</span><span class="nx">end</span><span class="p">);</span>
<span class="p">})()</span>
</pre></div>
</td></tr></table>

</div>



<p>Comments are closed for this post.</p>

<div class="spn-container"><div class="spn-group"><a class="spn-label spn-right" href="/blog/2008/09/wordpress-iphone-app"><i class="fa fa-arrow-circle-right"></i> <b>Next</b></a> <a class="spn spn-right" href="/blog/2008/09/wordpress-iphone-app">WordPress iPhone app</a></div><div class="spn-group"><a class="spn-label spn-left" href="/blog/2008/09/lukejarretmusiccom-revision"><i class="fa fa-arrow-circle-left"></i> <b>Previous</b></a> <a class="spn spn-left" href="/blog/2008/09/lukejarretmusiccom-revision">LukeJarretMusic.com revision</a></div></div>

	</div>
	<div class="col-md-4">
		<div class="sidebar">
			<div>
				<script>
				  (function() {
				    var cx = '008188071449344830133:rxk4xlcy2fi';
				    var gcse = document.createElement('script');
				    gcse.type = 'text/javascript';
				    gcse.async = true;
				    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
				        '//www.google.com/cse/cse.js?cx=' + cx;
				    var s = document.getElementsByTagName('script')[0];
				    s.parentNode.insertBefore(gcse, s);
				  })();
				</script>
				<gcse:searchbox-only></gcse:searchbox-only>
			</div>
			<h3><i class="fa fa-rss"></i> <a href="/blog/feed.xml">RSS Feed</a></h3>
			<h3>Latest Posts</h3>
			<ul class="latest-posts">
				
					<li><i class="fa fa-leaf"></i> <a href="/blog/2010/11/write-your-own-coda-plug-in">Write Your Own Coda Plug-In</a></li>
				
					<li><i class="fa fa-leaf"></i> <a href="/blog/2010/04/debian-beep-at-login-prompt">Debian: Beep at Login Prompt</a></li>
				
					<li><i class="fa fa-leaf"></i> <a href="/blog/2010/04/stop-remote-desktop-from-locking-the-host">Stop Remote Desktop from Locking the Host</a></li>
				
					<li><i class="fa fa-leaf"></i> <a href="/blog/2010/02/google-voice-fluid-ssb">Google Voice + Fluid (SSB)</a></li>
				
					<li><i class="fa fa-leaf"></i> <a href="/blog/2010/01/downgrading-to-flash-player-9-on-mac-os-x">Downgrading to Flash Player 9 on Mac OS X</a></li>
				
			</ul>
			<h3>Archive</h3>
			<div class="years"><div class="year"><h4><a href="/blog/2010">2010</a></h4><ul class="months"><li class="month Jan"><a class="month-link" href="/blog/2010/01">January</a></li><li class="month Feb"><a class="month-link" href="/blog/2010/02">February</a></li><li class="month Apr"><a class="month-link" href="/blog/2010/04">April</a></li><li class="month Nov"><a class="month-link" href="/blog/2010/11">November</a></li></ul></div><div class="year"><h4><a href="/blog/2009">2009</a></h4><ul class="months"><li class="month Jan"><a class="month-link" href="/blog/2009/01">January</a></li><li class="month Feb"><a class="month-link" href="/blog/2009/02">February</a></li><li class="month Mar"><a class="month-link" href="/blog/2009/03">March</a></li><li class="month Apr"><a class="month-link" href="/blog/2009/04">April</a></li><li class="month May"><a class="month-link" href="/blog/2009/05">May</a></li><li class="month Jun"><a class="month-link" href="/blog/2009/06">June</a></li><li class="month Aug"><a class="month-link" href="/blog/2009/08">August</a></li><li class="month Oct"><a class="month-link" href="/blog/2009/10">October</a></li><li class="month Nov"><a class="month-link" href="/blog/2009/11">November</a></li><li class="month Dec"><a class="month-link" href="/blog/2009/12">December</a></li></ul></div><div class="year"><h4><a href="/blog/2008">2008</a></h4><ul class="months"><li class="month Sep"><a class="month-link" href="/blog/2008/09">September</a></li><li class="month Oct"><a class="month-link" href="/blog/2008/10">October</a></li><li class="month Nov"><a class="month-link" href="/blog/2008/11">November</a></li></ul></div></div>
		</div>
	</div>
</div>


      <div class="footer blog">
         Copyright &copy; 2015 Adam Jarret
      </div> <!-- /footer -->
           
    </div> <!-- /container -->

    <!-- JavaScript placed at the end of the document so the pages load faster -->
    <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
    <script src="/js/vendor/jquery.colorbox.min.js"></script>
    <script src="/js/app/app.js"></script>

  </body>
</html>
